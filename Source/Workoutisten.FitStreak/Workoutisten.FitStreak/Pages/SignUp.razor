@page "/signup"

@using Workoutisten.FitStreak.Converter

@using Workoutisten.FitStreak.Data.Models.User

@inject IRestClient _RestClient
@inject IConverterWrapper _Converter
@inject NavigationManager navigationManager


<MudStack>
    <MudStack AlignItems="AlignItems.Center">
        <MudImage Class="align-center" Src="Images/fitstreak_logo_white.svg" Width="300" Height="100"></MudImage>
    </MudStack>
    <MudPaper Class="rounded-xl p-4 mt-5" Elevation="5">
        <MudText Class="align-center" Typo="Typo.h4"><b>Register</b></MudText>
        <MudDivider/>
        <MudStack Spacing="3">
            <MudItem xs=12>
                <MudTextField @bind-Value="@registerModel.FirstName" Label="First Name" Variant="Variant.Text" Clearable="true" />
            </MudItem>
            <MudItem xs=12>
                <MudTextField @bind-Value="@registerModel.LastName" Label="Last Name" Variant="Variant.Text" Clearable="true" />
            </MudItem>
            <MudItem xs=12>
                <MudTextField @bind-Value="@registerModel.Email" Label="Email" Variant="Variant.Text" Clearable="true" />
            </MudItem>
            <MudItem xs=12>
                <MudTextField @bind-Value="@registerModel.Password" Label="Password" Variant="Variant.Text" Clearable="true" />
            </MudItem>
            <MudItem xs=12>
                <MudTextField @bind-Value="@registerModel.Password" Label="Reenter Password" Variant="Variant.Text" Clearable="true" />
            </MudItem>
            <MudDivider/>
            <FitStreakButton Label="Sign Up" OnClick="(() => SignUp_Button())"/>
        </MudStack>
    </MudPaper>
</MudStack>


@code {

    public RegisterModel registerModel { get; set; } = new RegisterModel();

    async Task SignUp_Button()
    {
        await _RestClient.RequestRegistrationAsync(await _Converter.ToDto<RegisterModel, RegistrationRequest>(registerModel));
        navigationManager.NavigateTo("/validate");
    }

}
